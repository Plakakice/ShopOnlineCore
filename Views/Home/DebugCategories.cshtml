@using ShopOnlineCore.Models
@inject ApplicationDbContext _context
@{
    var allProducts = _context.Products.ToList();
    var categories = allProducts.Select(p => p.Category).Distinct().OrderBy(c => c).ToList();
}

<!DOCTYPE html>
<html>
<head>
    <title>Debug Categories</title>
    <style>
        body { font-family: Arial; padding: 20px; }
        table { border-collapse: collapse; width: 100%; }
        th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }
        th { background-color: #4CAF50; color: white; }
        .category-list { background: #f9f9f9; padding: 15px; margin: 20px 0; }
    </style>
</head>
<body>
    <h1>Debug Categories</h1>
    
    <div class="category-list">
        <h2>Danh sách Category trong DB:</h2>
        <ul>
            @foreach (var cat in categories)
            {
                var count = allProducts.Count(p => p.Category == cat);
                <li><strong>@cat</strong> - @count sản phẩm</li>
            }
        </ul>
    </div>

    <h2>Tất cả sản phẩm:</h2>
    <table>
        <thead>
            <tr>
                <th>ID</th>
                <th>Tên</th>
                <th>Category</th>
                <th>Giá</th>
            </tr>
        </thead>
        <tbody>
            @foreach (var p in allProducts)
            {
                <tr>
                    <td>@p.Id</td>
                    <td>@p.Name</td>
                    <td>@p.Category</td>
                    <td>@p.Price.ToString("N0") ₫</td>
                </tr>
            }
        </tbody>
    </table>
    
    <br/>
    <a href="/" style="display: inline-block; padding: 10px 20px; background: #4CAF50; color: white; text-decoration: none; border-radius: 5px;">Về trang chủ</a>
</body>
</html>
